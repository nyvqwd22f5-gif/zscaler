# Configuring the ServiceNow Connectors
Source: https://help.zscaler.com/uvm/configuring-servicenow-connectors
PDF: https://help.zscaler.com/pdf/com/en/1530840.pdf

ServiceNow is used to set up systems that define, manage, automate, and structure IT services for companies.
To create the ServiceNow data source, go to **Configure** > **Sources**. The connector tile appears among the other available data sources. To learn more, see [Creating Data Sources](/uvm/creating-data-sources).
[See image.](#servicenow-tiles)
There are three available ServiceNow connector streams. Select those that are in scope based on your ServiceNow connector licenses and use cases:
- Assets: Retrieves asset data including computers and servers. Optionally collects Application data.
- Users: Retrieves user data along with their corresponding department.
- Generic: Allows data collection from any ServiceNow table to meet your customized needs.
This article covers the ServiceNow Assets and the ServiceNow Users streams.
If you’re looking for ServiceNow’s Generic, see [Configuring ServiceNow Generic Connectors](/uvm/servicenow-generic).
[]
![The ServiceNow - Assets and ServiceNow - Users tiles](/downloads/uvm/administration/connectors/sources/source-configuration-guides/servicenow-connectors/servicenow-tiles.png)
Authentication
To connect to ServiceNow, confirm your authentication type as Basic Auth or OAuth 2.0. This affects the parameters required to set up the connection.
The source authentication configuration requires the following parameters:
- [Username and Password](#param1)
- [Client ID and Client Secret](#param2)
- [Refresh Token](#param3)
[]
The username and password are used for Basic Auth and for the Password Grant Type in OAuth 2.0. They are used to access ServiceNow:
- When using Basic Auth, the user should have an admin role. To learn more, refer to the [ServiceNow documentation](https://www.servicenow.com/docs/bundle/xanadu-platform-administration/page/administer/roles/reference/r_BaseSystemRoles.html).
- When using OAuth 2.0, the user should have a security admin role. To learn more, refer to the [ServiceNow documentation](https://www.servicenow.com/docs/bundle/vancouver-platform-security/page/administer/security/concept/security-admin-role.html).
[]
The client ID and client secret are used for both OAuth 2.0 grant types (i.e., Password and Refresh Token).
To create a client ID and client secret, you need a user with an admin role:
- Log in to the ServiceNow admin console.
-
Go to **System OAuth** > **Application Registry**. Alternatively, in the left-side navigation **Filter** field, enter `application registry` and select **Application Registry**.
[See image.](#servicenow-app-registry-2)
-
On the **Application Registries** page, click **New**.
[See image.](#servicenow-app-registry-3)
-
On the **OAuth application** page, click **Create an OAuth API endpoint for external clients**.
[See image.](#servicenow-app-registry-4)
- On the **Application Registries - New Record** page, enter the following information:
- **Name**: Enter a unique name that identifies the platform.
- **Client ID**: The client ID is automatically generated by the instance.
- **Client Secret**: The client secret is automatically generated by the instance when you submit the form.
- **Redirect URL**: Configure the redirect URL according to your organizational requirements.
- **Logo URL**: Configure the logo URL according to your organizational requirements.
- **Public Client**: Configure the public client according to your organizational requirements.
- **Application**: The application is set to **Global** by default.
- **Accessible from**: Configure the accessibility according to your organizational requirements.
- **Active**: Configure the activity according to your organizational requirements.
- **Refresh Token Lifespan**: Enter `8,640,000` seconds into the field, which is equivalent to 100 days and can be increased.
- **Access Token Lifespan**: Enter `1,800` seconds into the field, which is equivalent to 30 minutes and can be increased.
- **Login URL**: Configure the login URL according to your organizational requirements.
-
**Comments**: Enter any comments about the application registry.
[See image.](#servicenow-app-registry-5)
- Click **Submit**.
- Copy the automatically generated client secret.
[]
If you prefer to opt out of providing username and password credentials, select the optional refresh token grant type. This option requires you to generate the refresh token via an HTTP POST request, in addition to the instance name, client ID, and client secret OAuth 2.0 parameters.
To generate the refresh token for your ServiceNow source, you need to make an HTTP POST request to the ServiceNow OAuth token endpoint. Prepare the instance name, username, password, client ID, and client secret OAuth 2.0 credentials you retrieved.
To generate the refresh token, launch your terminal and enter the following command. Optionally, you can use an API platform such as Postman:
`curl --location 'https://<instance-name>.service-now.com/oauth_token.do' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data-urlencode 'grant_type=password' \
--data-urlencode 'client_id=<client_ID>' \
--data-urlencode 'client_secret=<client_secret>' \
--data-urlencode 'username=<username>' \
--data-urlencode 'password=<user_password>'`
In the command, replace the following:
- instance_name: Enter the instance name you retrieved (e.g., acme).
- grant_type=password: Ensure that the grant type is set to password.
- client_id: Enter the client ID of the OAuth application you generated.
- client_secret: Enter the client secret of the OAuth application you generated.
- username: Enter your ServiceNow user account name that authorizes the access token request.
- password: Enter the password for the ServiceNow user account that authorizes the access token request.
This request returns an access token and a refresh token. Ensure that you enter the refresh token, and not the access token, into the authentication section of the data source configuration page.
Selecting the refresh token grant type in the platform displays the authentication section for entering the required parameters in the retrieval section, where you also need to re-enter the instance name.
Retrieval
In the source setup Retrieval section, set the following filters and specifications:
- [Instance Name checkbox/drop-down menu](#instance-name)
- [Application data checkboxes](#application-data)
- [Include User's Related Group checkbox](#include-users-related-group)
[]
The instance name is the name of the hosted ServiceNow instance. It is found in the URL in the format (e.g., `https://[instance-name].service-now.com`). For example, if your URL is `https://acme.service-now.com/`, then acme is the instance name.
The Instance Name field is applicable in all streams.
[]
Application data checkboxes retrieve related application data for each asset. There are four available checkboxes and fields for each selected asset are prefixed with their corresponding table name (e.g., `cmdb_ci_appl.sys_id`). The available checkboxes are:
- Include Related Applications Data
- Include Related Application Services (Discovered) Data
- Include Related Business Applications Data
- Include Related IT Service
The Application data checkboxes are applicable in the ServiceNow - Assets stream.
To effectively retrieve Application data, determine whether your organization uses the ServiceNow Service Mapping. If Service Mapping is not configured, you can select any of the four checkboxes to retrieve the available data types. If Service Mapping is configured, you can only retrieve one of the following data types:
- Related Applications data
- Related Application Services data
When Service Mapping is configured, you can retrieve Related Business Applications data only in conjunction with Related Application Services data. In this case, the Application Services and Business Applications data are dependent. If your configuration is not supported, contact Zscaler Support to discuss potential solutions.
[]
The Include User's Related Group checkbox retrieves the related group for each of the users retrieved.
The Include User's Related Group checkbox is applicable in the ServiceNow - Users stream.
Roles and Permissions
When setting up your ServiceNow sources, ensure that the user has access to the following relevant tables:
-
-
-
-
-
-
-
-
-
-
-
| **Stream** | **Tables** |
| ---------- | ---------- |
| ServiceNow - Assets | cmdb_ci_computercmdb_ci_servercmdb_ci_vm_instance |
| If you choose to retrieve application data, add the following relevant tables:Include Related Applications Data: cmdb_ci_applInclude Related Application Services (Discovered) Data: cmdb_ci_service_discoveredInclude Related Business Applications: cmdb_ci_business_appInclude Related IT Services** **Data: cmdb_ci_service |
| ServiceNow - Users | sys_usercmn_departmentsys_user_grmembersys_user_group |
Troubleshooting and FAQs
[](https://www.servicenow.com/docs/bundle/xanadu-it-operations-management/page/product/service-mapping/task/view-unified-map-sm-workspace.html)
| **Potential Cause** | **Troubleshooting Action** |
| ------------------- | -------------------------- |
| I selected the Business Application Data checkbox, but I am not seeing my business applications. | Check whether ServiceNow Service Mapping is enabled in your organization. If it is, you may need to select the Business Services (Discovered) Data checkbox in addition to the Business Application Data checkbox and rerun the source. To learn more about Service Mapping, refer to the ServiceNow documentation. |
| The Business Application Data checkbox retrieved my business applications, but some of the expected applications are missing. | Consider adding the Applications Data. |
[]
![Navigating to the Application Registry page in the ServiceNow admin console ](/downloads/uvm/administration/connectors/sources/source-configuration-guides/configuring-servicenow-connectors/servicenow-app-registry-2.png)
[]
![Selecting New to create a new application registry on the Application Registries page of the ServiceNow admin console](/downloads/uvm/administration/connectors/sources/source-configuration-guides/configuring-servicenow-connectors/servicenow-app-registry-3.png)
[]
![Selecting Create an OAuth API endpoint for external clients on the OAuth application page in the ServiceNow admin console](/downloads/uvm/administration/connectors/sources/source-configuration-guides/configuring-servicenow-connectors/servicenow-app-registry-4.png)
[]
![Entering the application registry details on the Application Registries - New Record page of the ServiceNow admin console](/downloads/uvm/administration/connectors/sources/source-configuration-guides/configuring-servicenow-connectors/servicenow-app-registry-5.png)