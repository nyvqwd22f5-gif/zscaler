# Configuring Lures Using Azure Decoys
Source: https://help.zscaler.com/deception/configuring-lures-using-azure-decoys
PDF: https://help.zscaler.com/pdf/com/en/1531511.pdf

After configuring the [integration between Microsoft Azure and Deception](/deception/setting-cloud-deception-microsoft-azure#zd-integration-azure-decoys) and [deploying the necessary decoys](/deception/setting-cloud-deception-microsoft-azure#zd-azure-decoys-setup), you can use the decoys to set up lures for attackers. You can use different methods to set up lures depending on the type of decoys, as explained in the following sections:
- [User Decoys](#zd-user-decoy-lure)
- [Service Principal Decoys](#zd-sp-decoy-lure)
- [Managed Identity Decoys](#zd-mi-decoy-lure)
- [App Service Decoys](#zd-as-decoy-lure)
- [Storage Account Container Decoys](#zd-sac-decoy-lure)
- [Storage Account File Share Decoys](#zd-safs-decoy-lure)
- [Key Vault Decoys](#zd-keyvault-decoy-lure)
- [ARM Template Decoys](#zd-arm-template-decoy-lure)
- [Container Registry Decoys](#zd-cr-decoy-lure)
- [VM Image Decoys](#zd-vmi-decoy-lure)
- [Generative AI Decoys](#gen-ai-decoy-lures)
[]User decoys in Azure are decoys that mimic legitimate Azure users. By default, the user decoys are part of the Decoys Resource Group that was created in Azure by Zscaler Deception during the integration. The user decoys have access to all decoy resources within the Decoys Resource Group. You can lure attackers using user decoys by placing their credentials on endpoints via landmine policies. The landmine agents create a logged-on session using the user decoy credentials, which allows users to access other decoy resources such as storage account containers and file shares. You can place credentials of user decoys on endpoints by configuring lures using the following methods:
- [Cloud Lures](/deception/configuring-cloud-lures)
- [Session Lures via Bash History](/deception/configuring-session-lures)
- [File Decoys via Credential Files](/deception/configuring-file-decoys)
If an adversary uses the decoy credentials to log in to Azure or access decoy resources, the event is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about Azure users, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/active-directory/fundamentals/how-to-create-delete-users).
[]Service principal decoys are decoy identities for applications in Azure. By default, the service principal decoys are part of the Decoys Resource Group that was created in Azure by Zscaler Deception during the integration. The service principal decoys have access to all decoy resources within the Decoys Resource Group. If an adversary has access to user decoys, they can also discover the service principal decoys. In addition, you can configure lures for service principal decoys on endpoints using the following methods:
- [Cloud Lures](/deception/configuring-cloud-lures)
- [Session Lures via Bash History](/deception/configuring-session-lures)
- [File Decoys via Credential Files](/deception/configuring-file-decoys)
If an adversary uses the credentials to access decoy resources, the event is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about service principals in Azure, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals?tabs=browser).
[]Managed identities in Azure allow applications to authenticate and communicate with each other. You can use managed identity decoys to detect adversarial interaction with legitimate applications (production environment) in Azure. When a legitimate application is accessed via managed identity decoy, the event is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn how to use managed identities, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview).
[]App service is a web service to host applications in Azure. App service decoys are designed as web shells that can lure attackers to execute remote commands. The command produces a result that exposes the endpoint URLs, identities, and secrets of other decoys. An execution of a command is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard). Subsequent interactions with other decoys are also logged as attacks separately. In addition, the app service decoys are also accessible via the Kudu endpoint, similar to legitimate app services. You can also configure lure attackers for app service decoys using the following methods:
- [Browser Lures](/deception/configuring-browser-lures)
- [Session Lures](/deception/configuring-session-lures)
An interaction with the app service decoy is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about app services in Azure, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/app-service/overview).
To learn more about the Kudu service for Azure apps, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/app-service/resources-kud).
[]Storage account container is a service in Azure to store unstructured data. The storage account container decoys allow you to deploy file datasets in the Azure Cloud. You can deploy storage account container decoys as either public or private decoys. If the storage account container decoy is configured as public, then an adversary can discover and enumerate the files hosted using various tools. If the storage account container decoy is configured as private, then you need to set up lures using the following methods:
- [Cloud Lures](/deception/configuring-cloud-lures)
- [Session Lures via Bash History](/deception/configuring-session-lures)
When configured using cloud lures, the storage account container becomes accessible via Azure File Explorer.
An interaction with the storage account container decoy is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about storage account containers, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction).
[]Storage account file shares are file shares that can be accessible via SMB or NFS protocols. The storage account file share decoys allow you to create mountable file shares with file datasets. The file share decoys are mounted on endpoints using [cloud lures](/deception/configuring-cloud-lures) or [session lures](/deception/configuring-session-lures).
An interaction with the storage account container decoy is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about storage account file shares, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/storage/files/storage-files-introduction).
[]Key vaults in Azure allow you to securely store secrets and certificates. The key vault decoys contain secrets to access other decoy resources. You can configure lures for key vault decoys using [file decoys](/deception/configuring-file-decoys) or [session lures](/deception/configuring-session-lures). When using file decoys, the adversary is lured to access other decoy resources using the secrets contained in the credential files. The enumeration of key vault decoys and subsequent interaction with other decoy resources are logged as attacks. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about key vaults, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/key-vault/general/overview).
[]ARM template is a template that allows you to deploy resources in Azure. The ARM template decoys do not generate an event in Zscaler Deception. However, you can use ARM template decoys to set up lures using other decoys such as user decoys, service principal decoys, key vault decoys, and file share decoys. An adversary can access the ARM template decoys and lure them to access other decoy resources using the information contained in the templates. When deployed, the ARM template decoys always fail. However, if you enable history when configuring ARM template decoys, an adversary can still use the deployment history to fetch information from the failed ARM template deployment.
To learn more about ARM templates, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/overview).
[]A container registry in Azure is a docker image registry. You can use a container registry decoy to lure attackers to push or pull docker images. You can set up lures for container registry decoys using [browser lures](/deception/configuring-browser-lures), [file decoys](/deception/configuring-file-decoys), and [session lures](/deception/configuring-session-lures). An interaction with the storage account container decoy is logged as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about container registries, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/container-registry/container-registry-intro).
[]Virtual Machine (VM) images allow you to launch new VM instances. A VM image decoy allows you to detect the exfiltration of data. A VM image decoy can be configured as a public or private decoy. You can use [browser lures](/deception/configuring-browser-lures) or [session lures](/deception/configuring-session-lures) to configure lures for VM image decoys. When an adversary uses the VM image decoy and boots it up to launch an instance, the VM image decoy communicates with Zscaler Deception and logs the event as an attack. You can view and analyze the attack details from the [Deception Dashboard](/deception/viewing-and-managing-zscaler-deception-dashboard).
To learn more about container registries, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/virtual-machines/overview).
[]Azure OpenAI is a fully managed service in Azure AI Foundry that makes high-performing foundation models from OpenAI available through a unified API. Deception allows you to create generative AI decoys using these foundation models. These generative decoys are interactive, and you can customize them to generate fake responses to lure attackers into entering more prompts. When an adversary accesses or interacts with the generative AI decoy, the event is logged as an attack. You can view and analyze the attack details from the [Deception dashboard](https://help-internal.zscaler.com/deception/v4_29/viewing-and-managing-zscaler-deception-dashboard).
Azure obfuscates the last octet of IP addresses of the users that interact with generative AI decoys. Zscaler recommends avoiding containment of these IP addresses from the [Investigate page](/deception/taking-action-from-the-dashboard#third-party-containment) or through [Orchestration rules](https://help.zscaler.com/deception/creating-orchestration-rule#response-automation).
To learn more about generative AI models in Azure, refer to the [Microsoft documentation](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models?tabs=global-standard%2Cstandard-chat-completions).